{% extends "base.html" %}
{% block html_lang %}{{ page.lang }}{% endblock %}

{% block title %}{{ SITENAME }} - {{ page.title }}{%endblock%}

{% block head %}
  {{ super() }}

  {% import 'translations.html' as translations with context %}
  {% if translations.entry_hreflang(page) %}
    {{ translations.entry_hreflang(page) }}
  {% endif %}
{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/js/codemirror/codemirror.css" type="text/css" media="all" charset="utf-8">
    <style>
        h1 {
            counter-reset: h1 {{ page.order }};
        }

        .CodeMirror {
            height: initial;
            font-size: 80%;
            line-height: 140%;
        }

        pre .CodeMirror-line {
            outline: initial;
            outline-offset: initial;
        }

        .CodeMirror pre.CodeMirror-line, .CodeMirror pre.CodeMirror-line-like {
            font-family: ocr-pbi;
        }
    </style>
{% endblock %}

{% block content %}
    <h1>{{ page.title }}</h1>
    {% import 'translations.html' as translations with context %}
    {{ translations.translations_for(page) }}

    {{ page.content }}

    {% if page.modified %}
        <p>
        Last updated: {{ page.locale_modified }}
        </p>
    {% endif %}
    <!-- <script src="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/js/activateSnippets.js"></script> -->
{% endblock %}

{% block sketch %}
    {% if page.sketch %}
        <section id="canvas">
            <script type="text/p5" data-editor-layout="vertical" data-autoplay="autoplay"
                src="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/{{ page.sketch }}"
                data-p5-path="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/{{ page.p5 }}"
                {% if page.requirements %}
                    data-requirements="{% for requirement in page.requirements %}{{ SITEURL }}/{{ THEME_STATIC_DIR }}/{{ requirement }}{% if not loop.last %}, {% endif %}{% endfor %}"
                {% endif %}>
            </script>
        </section>
    {% endif %}
{% endblock %}

{% block extra_scripts %}
    <script src="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/js/codemirror/codemirror.js"></script>
    <script src="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/js/codemirror/javascript.js"></script>
    <script src="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/js/activateCodeblocks.js"></script>
    <script>
        activateCodeblocks();
    </script>
{% endblock %}